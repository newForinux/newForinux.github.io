---
layout: post
title: 1. AWS EC2ì— React ì›¹ ë°°í¬í•˜ê¸° (feat. Nginx)
tag: [í”„ë¡ íŠ¸ì—”ë“œ ì‚½ì§ˆ ì—¬í–‰]
image: 
  path: /assets/img/blog/aws-logo.png
description: >
  ë“œë””ì–´ ì¨ë³´ëŠ” í´ë¼ìš°ë“œ ê¸°ë°˜ ì›¹ ë°°í¬
sitemap: false
---

ì´ì „ì— ì œì‘í–ˆë˜ [ê³¼ì œ ì±„ì  ì›¹ì„œë¹„ìŠ¤](https://newforinux.github.io/post/2021-05-23-react-ts-12)ëŠ” ì—°êµ¬ì‹¤ ì„œë²„ë¥¼ ì´ìš©í•˜ëŠ” ì˜¨í”„ë ˆë¯¸ìŠ¤ ë°©ì‹ì´ì—ˆëŠ”ë°,

ë“œë””ì–´ AWS EC2ë¥¼ ì‚¬ìš©í•´ì„œ, í´ë¼ìš°ë“œ ë°©ì‹ìœ¼ë¡œ ì›¹ì„ ë°°í¬í–ˆë‹¤.

êµ¬ê¸€ë§í•˜ë©´ì„œ [ì´ ë¸”ë¡œê·¸](https://medium.com/@bdv111/aws-ec2%EC%97%90%EC%84%9C-nginx%EB%A1%9C-react-%EC%95%B1-%EC%A7%81%EC%A0%91-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0-c1e09639171e)ì™€ [ì´ ë¸”ë¡œê·¸](https://wookim789.tistory.com/34)ë¥¼
ë§ì´ ì°¸ê³ í–ˆëŠ”ë°, ë„ì „í•˜ë©´ì„œ í•œ ì‚½ì§ˆì„ ì •ë¦¬í•˜ë ¤ê³  í•œë‹¤ğŸ‘

<br>

## ğŸ¤” ë“¤ì–´ê°€ê¸° ì „, ì–´ë–¤ ì›¹ ì„œë¹„ìŠ¤ì¸ê°€ìš”?
ë£¸ë©”ì´íŠ¸ê°€ êµë‚´ ë°ì´í„° ì‹œê°í™” ê²½ì§„ëŒ€íšŒì— ì°¸ì—¬í–ˆëŠ”ë°, ê·¸ ê²°ê³¼ë¬¼ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•œ ë§¤ê°œì²´ë¥¼ ì°¾ê³  ìˆì—ˆë‹¤. ~~PPTë¡œ ë§Œë“¤ê¸°ì—” ì•„ê¹ë‹¤ê³ ~~

ê·¸ ì¦ˆìŒ ë‚˜ëŠ” ì·¨ì—… ì¤€ë¹„ ëª…ëª©ìœ¼ë¡œ 2ê°œ ê³¼ëª©ë§Œ ë“£ê³  ìˆì—ˆëŠ”ë°, ì›¹ìœ¼ë¡œ êµ¬í˜„í•˜ë©´ ë‚˜ë¥¼ ì¨ë‹¬ë¼ê³  í–ˆê³ ,

ê·¸ ê²°ê³¼ ë‚´ ê³ ê°ë‹˜ì´ ë˜ì—ˆë‹¤.~~ã…‹ã…‹~~

ì‚¬ì‹¤ ë°±ì—”ë“œê°€ í•„ìš”ì—†ì„ ì •ë„ë¡œ ê·œëª¨ê°€ í¬ì§€ ì•Šì•„ì„œ í”„ë¡ íŠ¸ì—”ë“œìª½ ìš•ì‹¬ì„ í¬ê²Œ ë‚¼ ìˆ˜ ìˆëŠ” í”„ë¡œì íŠ¸ê°€ ë  ê²ƒ ê°™ë‹¤.

<br>

ì•„ì§ ë ˆì´ì•„ì›ƒê³¼ ìì˜í•œ ê¸°ëŠ¥ë§Œ ì¶”ê°€í•´ ë†“ì€ ìƒíƒœë¼, AWSë¥¼ ì‚¬ìš©í•´ì„œ ë°°í¬í•˜ëŠ” ê²ƒë¶€í„° ì‚½ì§ˆë¡ì„ ì‘ì„±í•œë‹¤.

<br>

## âš™ï¸ AWS EC2 Instance ìƒì„±í•˜ê¸°
[AWS EC2](https://aws.amazon.com/aws/ec2)ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± -> AMI ì¤‘ Amazon Linux 2 AMI ì„ íƒ -> t2.micro (Free Tier ì‚¬ìš© ê°€ëŠ¥) ì„ íƒ

ì¸ìŠ¤í„´ìŠ¤ ìƒì„¸ ì„¤ì • (Configure Instance Details)ì€ ê·¸ëŒ€ë¡œ ë‘ê³ , ìŠ¤í† ë¦¬ì§€ ì¶”ê°€ (Add Storage)ì—ì„œ Free Tierì˜ ìµœëŒ€ SSD ìš©ëŸ‰ì¸ 30GBë¡œ ìˆ˜ì •

íƒœê·¸ ì¶”ê°€ (Add Tags)ëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸° í¸í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìˆì§€ë§Œ, ë‚˜ëŠ” ê·¸ëŒ€ë¡œ ë„˜ì–´ê°”ë‹¤.

ë³´ì•ˆ ê·¸ë£¹ ì„¤ì • (Configure Security Group)ì—ì„œ SSHëŠ” ë‚´ ì•„ì´í”¼(My IP)ë¡œ ì„¤ì •í•˜ê³ ,

HTTPì™€ HTTPSë¥¼ ì¶”ê°€í•œ ë’¤ ëª¨ë“  ê³³(Anywhere)ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë°°í¬í•˜ëŠ” ì›¹ì— ì–´ë””ì„œë“  ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

ì´í›„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , SSH Key pairë¥¼ ì„¤ì •í•œë‹¤.

í‚¤ ì´ë¦„ì„ ì ìœ¼ë©´ private key (`.pem` íŒŒì¼)ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ì„ ìˆ˜ ìˆë‹¤.

ì ì ˆí•œ ê³³ì— ë‹¤ìš´ë¡œë“œí•œ í›„ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ ë§ˆì¹œë‹¤.

<br>

## ğŸ”¥ SSHë¡œ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ê¸°

![Current Instance](/assets/img/blog/aws_1.png){:.border.lead width="900" height="500" loading="lazy"}

<br>

ìœ„ ì´ë¯¸ì§€ì²˜ëŸ¼ ì¸ìŠ¤í„´ìŠ¤ê°€ ì‹¤í–‰ ì¤‘(running)ì´ ë˜ë©´ ë¡œì»¬ì—ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•  ìˆ˜ ìˆìœ¼ë©°,

ì•„ê¹Œ ë‹¤ìš´ë¡œë“œ ë°›ì€ private key íŒŒì¼ì„ ì‚¬ìš©í•  ë•Œê°€ ì™”ë‹¤.

**Windows 10, 11 ê¸°ì¤€**ìœ¼ë¡œ íŒŒì¼ì„ ë‹¤ìŒìœ¼ë¡œ ì˜®ê¸´ë‹¤.

<br>

~~~
C:\Users\{ì‚¬ìš© ì¤‘ì¸ ë¡œì»¬ ê³„ì •ëª…}\.ssh
~~~

<br>

![Path](/assets/img/blog/aws_2.png){:.border.lead width="600" height="600" loading="lazy"}

<br>

ì²˜ìŒ ìœ„ ê²½ë¡œë¡œ ë“¤ì–´ê°€ë©´ `known_hosts`, `config` íŒŒì¼ë§Œ ìˆì„ ìˆ˜ ìˆë‹¤.

`aws_web_newkey.pem` íŒŒì¼ì´ ì˜®ê¸´ ë‹¤ìš´ë¡œë“œ ë°›ì€ private key.

<br>

ë©”ëª¨ì¥ì„ ì¼  í›„, `config` íŒŒì¼ì„ ë©”ëª¨ì¥ìœ¼ë¡œ ë“œë˜ê·¸ & ë“œë¡­í•˜ë©´ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.

ë‹¤ìŒ ë‚´ìš©ì„ **ì¶”ê°€**í•œë‹¤.

<br>

~~~
Host {ì‚¬ìš©í•˜ë ¤ëŠ” ì´ë¦„. ë§ˆìŒëŒ€ë¡œ ì ëŠ”ë‹¤}
    HostName {í˜¸ìŠ¤íŠ¸ ë„¤ì„}
    User ec2-user
    IdentityFile ~/.ssh/{private key íŒŒì¼ëª…}.pem
~~~

<br>

í˜¸ìŠ¤íŠ¸ ë„¤ì„ì€ ì•„ë˜ ì´ë¯¸ì§€ì—ì„œ ì°¾ì„ ìˆ˜ ìˆë‹¤.

<br>

![Host first](/assets/img/blog/aws_3.png){:.border.lead width="600" height="600" loading="lazy"}
ğŸ“¢ ì¸ìŠ¤í„´ìŠ¤ ì˜¤ë¥¸ìª½ í´ë¦­ -> ì—°ê²°
{:.figcaption}


<br>

![Host second](/assets/img/blog/aws_4.png){:.border.lead width="600" height="600" loading="lazy"}

ì—¬ê¸°ì„œ ë¹¨ê°„ ë„¤ëª¨ ì•ˆì˜ ë‚´ìš©ì„ ë³µì‚¬í•˜ì—¬ ìœ„ {í˜¸ìŠ¤íŠ¸ ë„¤ì„} ì— ë¶™ì—¬ë„£ê³  ì €ì¥í•œë‹¤.

<br>

## â›ï¸ í‚¤ íŒŒì¼ ê¶Œí•œ ì¡°ì • ë° ì ‘ì†
ë‹¤ìš´ë¡œë“œ ë°›ì€ private keyì¸ `.pem` íŒŒì¼ì˜ ê¶Œí•œì„ ìˆ˜ì •í•´ì•¼ í•œë‹¤.

`.pem` íŒŒì¼ ìš°í´ë¦­ -> ì†ì„± -> ë³´ì•ˆ íƒ­ í´ë¦­ -> ê³ ê¸‰ ë²„íŠ¼ í´ë¦­ -> ìƒì† í•´ì œ (ìƒì† ì œê±°ë¥¼ ëˆ„ë¥´ë©´ ì „ì²´ ì œê±° ê°€ëŠ¥) -> ì°½ ë‹«ê¸°

ì´í›„, ë³´ì•ˆ íƒ­ì—ì„œ í¸ì§‘ ë²„íŠ¼ í´ë¦­ -> ì¶”ê°€ ë²„íŠ¼ í´ë¦­ -> ê°œì²´ ì´ë¦„ í…ìŠ¤íŠ¸ ì°½ì— ìì‹ ì˜ ê³„ì •ëª… ì¶”ê°€ -> ì´ë¦„ í™•ì¸ í›„ í™•ì¸

ì´í›„, <b>ì½ê¸° ë° ì‹¤í–‰, ì½ê¸°ëŠ” í—ˆìš©</b>ìœ¼ë¡œ, <b>ì“°ê¸°ëŠ” ê±°ë¶€</b>ë¡œ ì„¤ì •í•œë‹¤.

[ì´ê³³](https://wookim789.tistory.com/34)ì„ ì°¸ì¡°í•˜ë©´ ì¹œì ˆíˆ ìŠ¤í¬ë¦°ìƒ·ê¹Œì§€ ìˆë‹¤.

<br>

ê·¸ ë‹¤ìŒ, cmdì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œë‹¤.

~~~
C:\Users\{ë¡œì»¬ ê³„ì •ëª…} > ssh {ìœ„ì˜ Hostì— ì ì€ ì´ë¦„}
~~~

<br>

ìœˆë„ìš° cmdì—ì„œ SSH ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ë©´, OpenSSH ì„œë¹„ìŠ¤ë¥¼ ì„¤ì¹˜í•´ì•¼ í•œë‹¤. [ì—¬ê¸° ì°¸ê³ ](https://lucidmaj7.tistory.com/178)

<br>

![Before ssh](/assets/img/blog/aws_5.png){:.border.lead width="600" height="600" loading="lazy"}
ê·¸ëŸ¼ìš” ì•„ë¬´ë ´ìš”
{:.figcaption}

<br>

~~~
C:\Users\{ë‚´ ê³„ì •}>ssh aws_webs_ec2
The authenticity of host 'XXXXXXXXXXXXXXXXXXXXXXXXXXX' can't be established.
ECDSA key fingerprint is SHA256:/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' (ECDSA) to the list of known hosts.

       __|  __|_  )
       _|  (     /   Amazon Linux 2 AMI
      ___|\___|___|

https://aws.amazon.com/amazon-linux-2/
~~~

ì²˜ìŒ ì ‘ì† ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì§ˆë¬¸ì´ ë‚˜ì˜¤ëŠ”ë°, `yes`ë¥¼ ì…ë ¥í•´ ì£¼ë©´ ëœë‹¤.

<br>

## ğŸ“‘ Github ì›ê²© ì €ì¥ì†Œì—ì„œ í´ë¡  ë°›ì•„ì˜¤ê¸°

~~~
remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.
remote: Please see https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/ for more information.
fatal: Authentication failed for '#########################'
~~~

<br>

ìš”ì¦˜ì€ HTTPS ê¸°ë°˜ìœ¼ë¡œ Github ê³„ì • ë° íŒ¨ìŠ¤ì›Œë“œë¥¼ ì…ë ¥í•´ í´ë¡  ë°›ëŠ” ê²ƒì´ ë§‰í˜”ë‚˜ ë³´ë‹¤.

ë”°ë¼ì„œ SSH ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦í•œ í›„ì—ì•¼ í´ë¡ ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.

ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œë‹¤.

<br>

~~~
// EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì§„í–‰í•˜ê³  ìˆëŠ” ì¤‘

$ cd ~/.ssh
$ ssh-keygen -t ed25519 -C "{ë‹¹ì‹ ì˜ ì´ë©”ì¼}@example.com"

  // ed25519 ë°©ì‹ìœ¼ë¡œ ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´, RSA ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•œë‹¤
  $ ssh-keygen -t rsa -b 4096 -C "{ë‹¹ì‹ ì˜ ì´ë©”ì¼}@example.com"
~~~

<br>

ìœ„ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´,

<br>

~~~
Generating public/private ed25519 key pair.
Enter file in which to save the key (/Users/XXXXXXXX/.ssh/id_ed25519):

Enter passphrase (empty for no passphrase):
Enter same passphrase again:
~~~

<br>

**ì €ì¥í•˜ë ¤ëŠ” ìœ„ì¹˜**ì™€, **SSH í‚¤ì— ëŒ€í•œ ë¹„ë°€ë²ˆí˜¸**ë¥¼ ë¬¼ì–´ë³¸ë‹¤.

ìœ„ì¹˜ëŠ” ê·¸ëŒ€ë¡œ ë†”ë‘¬ë„ ê´œì°®ê³ , ë¹„ë°€ë²ˆí˜¸ëŠ” Githubì—ì„œ ì„¤ì •í•˜ê¸°ë¥¼ ê¶Œì¥í•˜ê³  ìˆë‹¤. ~~ë‚˜ëŠ” ì•ˆí–ˆì§€ë§Œ~~

ëª¨ë“  ì„¤ì •ì„ ë§ˆì¹˜ë©´, ë‘ ê°œì˜ íŒŒì¼(`id_ed25519`, `id_ed25519.pub`)ì´ ìƒì„±ëœë‹¤. 

<br>

~~~
Your identification has been saved in /home/ec2-user/.ssh/id_ed25519.
Your public key has been saved in /home/ec2-user/.ssh/id_ed25519.pub.
The key fingerprint is:
SHA256:XXXXXXXXXXXXXXXXXXXXXXXXXXX my-mail@example.com
The key's randomart image is:
+--[ED25519 256]--+
| o.=..           |
|  E =            |
| * O .           |
|. = o .          |
| o * = .S        |
|  B @.o+         |
|    .            |
| .=.. .*         |
| o=*o.o.         |
+----[SHA256]-----+
~~~

<br>

ì´ì œ ì´ í‚¤ë¥¼ Gihtub SSH Keyì— ë“±ë¡í•´ì•¼ í•œë‹¤.

ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì„œ ë³µì‚¬í•˜ë„ë¡ í•˜ì.

<br>

~~~
$ cat id_ed25519.pub
~~~

<br>

`.pub`ì€ public key, `.pub`ì´ ì—†ëŠ” íŒŒì¼ì€ **private key**ì´ë©° **ì ˆëŒ€ ê³µê°œí•˜ë©´ ì•ˆ ë˜ë¯€ë¡œ** ìœ ì˜í•˜ë„ë¡ í•˜ì.

<br>

Githubì— ë¡œê·¸ì¸í•˜ì—¬ Settings -> SSH and GPG Keysì— ë“¤ì–´ê°„ë‹¤.

![Github SSH 1](/assets/img/blog/aws_6.png){:.border.lead width="600" height="600" loading="lazy"}

<br>

ì—¬ê¸°ì„œ New SSH Key ë²„íŠ¼ì„ ëˆ„ë¥´ê³ ,

<br>

![Github SSH 2](/assets/img/blog/aws_7.png){:.border.lead width="600" height="600" loading="lazy"}

ì ì ˆí•œ ì´ë¦„ê³¼ í•¨ê»˜ ë°©ê¸ˆ ì „ ë³µì‚¬í–ˆë˜ ë‚´ìš©ì„ ë„£ê³  ì €ì¥í•˜ë©´, SSH ê¸°ë°˜ìœ¼ë¡œ `git clone`ì´ ê°€ëŠ¥í•´ì§„ë‹¤.

<br>

~~~
git clone git@github.com:newForinux/XXXXXXXXXXXXXXXXX
Cloning into 'XXXXXXXXXXXXXXXXXXXXXX'...
Warning: Permanently added the RSA host key for IP address 'XXX.XXX.XXX.XXX' to the list of known hosts.
remote: Enumerating objects: 100, done.
remote: Counting objects: 100% (100/100), done.
remote: Compressing objects: 100% (61/61), done.
remote: Total 100 (delta 42), reused 90 (delta 35), pack-reused 0
Receiving objects: 100% (100/100), 333.99 KiB | 7.26 MiB/s, done.
Resolving deltas: 100% (42/42), done.
~~~

<br>

## ğŸ’ í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜

íŒ¨í‚¤ì§€ë¥¼ ì—…ë°ì´íŠ¸í•˜ê³ , <b>Nginx ì›¹ ì„œë²„</b>ì™€ <b>git</b>ì„ ì„¤ì¹˜í•´ ì£¼ì.

~~~bash
// Amazon Linux 2 AMIëŠ” CentOS ê¸°ë°˜ì´ë‹¤
$ sudo yum update
$ sudo yum install git
$ sudo yum install nginx
~~~

<br>

Nginxë¥¼ ì„¤ì¹˜í•˜ë ¤ê³  í•˜ë©´

<br>

~~~
$ sudo yum install nginx
Loaded plugins: extras_suggestions, langpacks, priorities, update-motd
No package nginx available.
Error: Nothing to do


nginx is available in Amazon Linux Extra topic "nginx1"

To use, run
# sudo amazon-linux-extras install nginx1

Learn more at
https://aws.amazon.com/amazon-linux-2/faqs/#Amazon_Linux_Extras
~~~

<br>

ìœ„ì™€ ê°™ì€ ì•Œë¦¼ì´ ëœ° ìˆ˜ ìˆëŠ”ë°,

`# sudo amazon-linux-extras install nginx1` ì´ ë¶€ë¶„ì„ ê·¸ëŒ€ë¡œ ì‘ì„±í•´ì„œ Nginxë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤

<br>

React ì•±ì„ ë¹Œë“œ / ë°°í¬í•˜ê¸° ìœ„í•´ì„œ **yarn**ê³¼ **NodeJS** ë˜í•œ ì„¤ì¹˜í•˜ë„ë¡ í•˜ì.

<br>

~~~
$ curl -o- -L https://yarnpkg.com/install.sh | bash
$ source ~/.bashrc
$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
$ . ~/.nvm/nvm.sh
$ nvm install node
~~~

<br>

ğŸ“¢ ë‚˜ì™€ ê°™ì´ ì € ë²„ì „ì´ ì‹ ê²½ì“°ì´ëŠ” ì‚¬ëŒì„ ìœ„í•´ [ì´ ê³³ì„ ì°¸ì¡°](https://github.com/nvm-sh/nvm#installing-and-updating)í•˜ë©´ í˜„ ë²„ì „ì— ë§ëŠ” ì»¤ë§¨ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ì´í›„ `yarn`ì„ ì‚¬ìš©í•´ì„œ ì˜ì¡´ì„± íŒŒì¼ì„ ì„¤ì¹˜í•˜ê³ , ë¹Œë“œí•œë‹¤.

<br>

~~~
$ yarn install
$ yarn run build --prod
~~~

<br>

### ğŸš¨ ì—¬ê¸°ì„œ ì ê¹!

~~~

... ë¬´ìˆ˜í•œ ì—ëŸ¬ ë‚´ìš© ...

make: *** [Release/obj.target/libsass/src/libsass/src/ast.o] Error 127
gyp ERR! build error
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onExit (/home/ec2-user/.ssh/XXXXXXXXXXXXXXXXXXXXXXX/node_modules/node-gyp/lib/build.js:194:23)
gyp ERR! stack     at ChildProcess.emit (node:events:390:28)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (node:internal/child_process:290:12)
gyp ERR! System Linux 4.14.252-195.483.amzn2.x86_64
gyp ERR! command "/home/ec2-user/.nvm/versions/node/v17.1.0/bin/node" "/home/ec2-user/.ssh/XXXXXXXXXXXXXXXXXXXXXXX/node_modules/node-gyp/bin/node-gyp.js" "rebuild" "--verbose" "--libsass_ext=" "--libsass_cflags=" "--libsass_ldflags=" "--libsass_library="
gyp ERR! cwd /home/ec2-user/.ssh/XXXXXXXXXXXXXXXXXXXXXXX/node_modules/node-sass
gyp ERR! node -v v17.1.0
gyp ERR! node-gyp -v v7.1.2
~~~

<br>

ğŸ˜³??

<br>

ì˜ì¡´ì„± ì„¤ì¹˜ë¶€í„° í˜ê²¨ìš´ ì‹¸ì›€ì´ì—ˆìœ¼ë‚˜...

**ê°œë°œ í™˜ê²½ì˜ node ë²„ì „ê³¼ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì„¤ì¹˜í•œ nodeì˜ ë²„ì „ì´ ì•ˆë§ì„ ë•Œ** ë°œìƒí•˜ëŠ” ì—ëŸ¬ì˜€ë‹¤.

í˜„ì¬ node ë²„ì „ì€ `17.1.0` ë²„ì „ì´ê³ ,

í˜¹ì‹œ ëª°ë¼ì„œ í™•ì¸í•´ ë³¸ ë¡œì»¬ node ë²„ì „ì€ `15.4.0`ì´ì—ˆë‹¤.

<br>

í›„...ğŸ™„

<br>

ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ í˜„ì¬ ì„¤ì¹˜ëœ node ë²„ì „ì„ ë³€ê²½í–ˆë‹¤.

~~~
$ nvm deactivate
$ nvm uninstall v17.1.0
$ nvm install v15.4.0
~~~

<br>

ì´í›„ ë‹¤ì‹œ ì˜ì¡´ì„± ì„¤ì¹˜ / ë¹Œë“œë¥¼ ì‹œë„í–ˆë”ë‹ˆ ë¬¸ì œê°€ ì—†ì—ˆë‹¤!

<br>

## ğŸ§¶ Nginx ì›¹ ì„œë²„ ì„¤ì •í•˜ê¸°

`nginx.conf`ê°€ ì„œë¹„ìŠ¤ì˜ ì„¤ì •ì„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ ì£¼ì.

~~~
$ sudo vi /etc/nginx/nginx.conf
~~~

<br>

ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬, `http` ë¸”ë¡ ì•ˆì˜ `server` ë¸”ë¡ì„ ì£¼ì„ ì²˜ë¦¬(#) í•˜ê³ ,

`include /etc/nginx/sites-enabled/*.conf;`ë¥¼ ì¶”ê°€í•˜ì—¬ `sites-enabled` ì„¤ì • íŒŒì¼ì„ í¬í•¨ì‹œí‚¨ë‹¤.

<br>

~~~
...

include /etc/nginx/conf.d/*.conf;
include /etc/nginx/sites-enabled/*.conf;  <-- ì¶”ê°€!!


# server {
#    listen       80;
#    listen       [::]:80;
#    server_name  _;
#    root         /usr/share/nginx/html;
#  # Load configuration files for the default server block.
#    include /etc/nginx/default.d/*.conf;
#    location / {
#    }
#    error_page 404 /404.html;
#        location = /40x.html {
#    }
#    error_page 500 502 503 504 /50x.html;
#        location = /50x.html {
#    }
#}
...
~~~

<br>

Nginxë¥¼ ì²˜ìŒ ì„¤ì¹˜í•˜ë©´ `sites-available`, `sites-enabled` ë””ë ‰í† ë¦¬ê°€ ì—†ë‹¤. ë§Œë“¤ì–´ ì£¼ì.

<br>

~~~
$ sudo mkdir /etc/nginx/sites-available
$ sudo mkdir /etc/nginx/sites-enabled

$ sudo vi /etc/nginx/sites-available/{ë§Œë“¤ ì„¤ì • íŒŒì¼ëª…}.conf
~~~

<br>

íŒŒì¼ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤.

<br>

~~~
server {
  listen 80;
  location / {
    root /home/ec2-user/{í´ë¡  ë°›ì€ React ì•± ë£¨íŠ¸ ê²½ë¡œ}/build;
    index index.html index.htm;
    try_files $uri $uri/ /index.html;
  }
}
~~~

<br>

ì´í›„, ì‹¬ë³¼ë¦­ ë§í¬ íŒŒì¼ì„ ë§Œë“¤ê³  í…ŒìŠ¤íŠ¸í•œë‹¤.

<br>

~~~
$ sudo ln -s /etc/nginx/sites-available/#######.conf /etc/nginx/sites-enabled/{ë§Œë“  ì„¤ì • íŒŒì¼ëª…}.conf

$ sudo nginx -t
~~~

<br>

~~~
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
~~~

<br>

ì´ë ‡ê²Œ ë‚˜ì˜¤ë©´ í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí•œ ê²ƒì´ë©°,

<br>

~~~
nginx: [emerg] unexpected "}" in /etc/nginx/nginx.conf:84
nginx: configuration file /etc/nginx/nginx.conf test failed
~~~

ìœ„ì™€ ê°™ì´ ëœ¨ë©´ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•œ ê²ƒì´ë‹¤.
`Nginx.conf` ë˜ëŠ” `sites-available`ì—ë‹¤ê°€ ë§Œë“  ì„¤ì • íŒŒì¼ì„ ì ê²€í•˜ì. ~~(`;` í•˜ë‚˜ ë¹¼ë¨¹ì–´ì„œ ì˜¤ë¥˜ê°€ ë‚¬ë‹¹ã…ã…)~~

ì´ì œ ë‹¤ ì™”ë‹¤ğŸ‘

<br>

~~~
$ sudo systemctl start nginx
~~~

<br>

ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì„œ ì›¹ ì„œë²„ë¥¼ êµ¬ë™í•˜ê³ , ë¡œì»¬ì—ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ IP ì£¼ì†Œë¥¼ ì…ë ¥í•˜ë©´

ë¹Œë“œí•œ React ì›¹ ì„œë¹„ìŠ¤ê°€ ì—°ê²°ëœë‹¤.

<br>

âœ¨ ê²°ê³¼

![Result](/assets/img/blog/aws_8.png){:.border.lead width="600" height="600" loading="lazy"}
ê¹”ë”í•˜ë‹¤ğŸ‘
{:.figcaption}

<br>

ë‹¤ìŒ í¬ìŠ¤íŒ…ì€ ë¬´ë£Œ ë„ë©”ì¸ + AWS ROUTE 53ì„ ì‚¬ìš©í•´ì„œ ë„ë©”ì¸ìœ¼ë¡œ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì—°ê²°í•˜ëŠ” ê²ƒì— ë‹¤ë£¨ë„ë¡ í•˜ê² ë‹¤ğŸ˜Š

<br>
